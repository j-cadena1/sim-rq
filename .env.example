# Sim RQ Environment Configuration
# ====================================
# Copy to .env and fill in your values. NEVER commit .env to git!

# ==========================================
# ENVIRONMENT
# ==========================================
# Set to 'development' for local testing (non-secure cookies for HTTP)
# Set to 'production' for deployment (secure cookies, requires HTTPS)
# NODE_ENV=development

# ==========================================
# REQUIRED
# ==========================================

# Database password - generate with: openssl rand -base64 24
DB_PASSWORD=CHANGE_ME_STRONG_PASSWORD

# Entra SSO encryption key - generate with: openssl rand -base64 32
# Required to encrypt SSO client secrets in the database
ENTRA_SSO_ENCRYPTION_KEY=CHANGE_ME_USE_OPENSSL_RAND_BASE64_32

# ==========================================
# PRODUCTION SETTINGS
# ==========================================

# Your public URL (required for SSO callbacks and CORS)
# CORS_ORIGIN=https://sim-rq.yourdomain.com

# ==========================================
# SSO - MICROSOFT ENTRA ID (optional)
# ==========================================
# Configure separate Entra ID app registrations for development and production.
# Environment variables take precedence over database configuration.
# When configured via env, the Settings SSO Configuration tab is hidden.
#
# IMPORTANT: Create two separate app registrations in Azure:
# 1. Development app with redirect URI: http://localhost:5173/api/auth/sso/callback
# 2. Production app with redirect URI: https://<your-domain>/api/auth/sso/callback

# Development SSO (optional - for local testing)
# DEV_ENTRA_SSO_TENANT_ID=your-azure-tenant-id
# DEV_ENTRA_SSO_CLIENT_ID=your-dev-app-client-id
# DEV_ENTRA_SSO_CLIENT_SECRET=your-dev-app-client-secret
# DEV_ENTRA_SSO_REDIRECT_URI=http://localhost:5173/api/auth/sso/callback

# Production SSO (optional - for production deployment)
# ENTRA_SSO_TENANT_ID=your-azure-tenant-id
# ENTRA_SSO_CLIENT_ID=your-prod-app-client-id
# ENTRA_SSO_CLIENT_SECRET=your-prod-app-client-secret
# ENTRA_SSO_REDIRECT_URI=https://<your-domain>/api/auth/sso/callback

# ==========================================
# REDIS (optional - for multi-instance deployments)
# ==========================================
# Redis enables distributed rate limiting and WebSocket pub/sub
# across multiple backend instances. Not needed for single-instance deployments.
# Leave REDIS_HOST empty to use in-memory fallbacks.

# REDIS_HOST=redis
# REDIS_PORT=6379
# REDIS_PASSWORD=

# ==========================================
# EMAIL NOTIFICATIONS (optional)
# ==========================================
# SMTP server configuration for email notifications
# Leave credentials blank if your SMTP server doesn't require auth

# SMTP_HOST=smtp.example.com
# SMTP_PORT=587
# SMTP_SECURE=false

# SMTP Authentication (optional - leave blank if not required)
# SMTP_USER=
# SMTP_PASSWORD=

# Email sender information
# SMTP_FROM_EMAIL=noreply@sim-rq.local
# SMTP_FROM_NAME=Sim RQ Notifications

# ==========================================
# FILE STORAGE (Garage S3-compatible - auto-configured)
# ==========================================
# S3-compatible storage for file attachments using Garage.
# Garage auto-initializes on first startup - no manual setup required!
#
# DEVELOPMENT: Default credentials are pre-configured in docker-compose.dev.yaml.
# File attachments work out of the box with `make dev`.
#
# PRODUCTION: Set unique credentials below. Generate with:
#   Access Key ID (GK + 24 hex chars): GK$(openssl rand -hex 12)
#   Secret Key (64 hex chars): $(openssl rand -hex 32)

# Internal endpoint (Docker service name - used by backend for uploads/deletes)
S3_ENDPOINT=http://garage:3900

# Public endpoint (browser-accessible URL for file downloads)
# The nginx config proxies /storage/ to Garage, so use your public domain + /storage
# Development: http://localhost:8080/storage (via nginx proxy)
# Production: https://your-domain.com/storage (via reverse proxy)
S3_PUBLIC_ENDPOINT=http://localhost:8080/storage

# Development defaults (change for production!)
# Key format: GK + 24 hex chars (26 total), Secret: 64 hex chars
S3_ACCESS_KEY_ID=GK0000000000000000deadbeef
S3_SECRET_ACCESS_KEY=0000000000000000000000000000000000000000000000000000000000000001

# Bucket name (auto-created on first startup)
S3_BUCKET_NAME=sim-rq-attachments
S3_REGION=garage

# File upload limits
# MAX_FILE_SIZE_MB=3072
# ALLOWED_FILE_TYPES=pdf,doc,docx,xls,xlsx,ppt,pptx,txt,csv,png,jpg,jpeg,gif,svg,webp,heic,heif,zip,mp4,mov,avi,webm,mkv,m4v

# Garage cluster settings (production only)
# GARAGE_ZONE=dc1
# GARAGE_CAPACITY=100G
